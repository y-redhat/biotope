<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StealthWall Search - å¤šå±¤è¿‚å›æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³</title>
    <style>
        /* ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ - ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ */
        :root {
            --primary: #0a0a0a;
            --secondary: #1a1a1a;
            --accent: #00d4ff;
            --accent2: #8a2be2;
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff4757;
            --text: #f0f0f0;
            --text-dim: #888;
            --glow: 0 0 15px rgba(0, 212, 255, 0.3);
            --glow2: 0 0 15px rgba(138, 43, 226, 0.3);
            --gradient: linear-gradient(135deg, var(--accent2), var(--accent));
        }
        
        /* ãƒªã‚»ãƒƒãƒˆ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--primary);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(138, 43, 226, 0.05) 0%, transparent 50%);
        }
        
        /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
            padding: 20px;
        }
        
        #startScreen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* ãƒ­ã‚´ã¨ã‚¿ã‚¤ãƒˆãƒ« - æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³é¢¨ */
        .portal-logo {
            text-align: center;
            margin-bottom: 40px;
            animation: glitch 5s infinite;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            97% { transform: translate(0); }
            98% { transform: translate(-1px, 0); }
            99% { transform: translate(1px, 1px); }
        }
        
        .logo-text {
            font-size: 3.5rem;
            font-weight: 300;
            letter-spacing: 8px;
            margin-bottom: 10px;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: var(--glow2);
        }
        
        .logo-tagline {
            color: var(--text-dim);
            font-size: 0.9rem;
            letter-spacing: 2px;
            margin: 5px 0;
        }
        
        /* ãƒ¡ã‚¤ãƒ³æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ - æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³é¢¨ */
        .main-search {
            width: 100%;
            max-width: 700px;
            margin: 0 auto 40px;
            position: relative;
        }
        
        .search-box {
            width: 100%;
            padding: 20px 40px;
            font-size: 1.1rem;
            background: var(--secondary);
            border: 2px solid transparent;
            border-radius: 35px;
            color: var(--text);
            outline: none;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }
        
        .search-box:focus {
            border-color: var(--accent);
            box-shadow: var(--glow), 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .search-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--gradient);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .search-button:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: var(--glow);
        }
        
        /* æ¤œç´¢çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .search-results {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            display: none;
            max-height: 60vh;
            overflow-y: auto;
            padding: 20px;
        }
        
        .search-results.active {
            display: block;
        }
        
        .result-count {
            color: var(--text-dim);
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .search-result {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .search-result:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent);
            transform: translateX(5px);
        }
        
        .search-result::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
            transition: 0.5s;
        }
        
        .search-result:hover::before {
            left: 100%;
        }
        
        .result-title {
            font-size: 1.2rem;
            color: var(--accent);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-url {
            color: var(--success);
            font-size: 0.85rem;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .result-snippet {
            color: var(--text-dim);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* çµ±è¨ˆã‚°ãƒªãƒƒãƒ‰ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 40px auto;
            max-width: 900px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(0, 212, 255, 0.1);
            text-align: center;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .success-rate { color: var(--success); }
        .speed-rate { color: var(--accent); }
        .methods-count { color: var(--warning); }
        .anonymity { color: var(--accent2); }
        
        /* ã‚¯ã‚¤ãƒƒã‚¯æ¤œç´¢ãƒªãƒ³ã‚¯ */
        .quick-search {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
            justify-content: center;
        }
        
        .search-tag {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: var(--accent);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .search-tag:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: translateY(-3px);
            box-shadow: var(--glow);
        }
        
        /* ãƒ–ãƒ©ã‚¦ã‚¶ç”»é¢ */
        #browserScreen {
            width: 100%;
            height: 100vh;
            display: none;
            flex-direction: column;
            background: var(--primary);
        }
        
        #browserScreen.active {
            display: flex;
        }
        
        /* ãƒ–ãƒ©ã‚¦ã‚¶ãƒ˜ãƒƒãƒ€ãƒ¼ */
        .browser-header {
            background: var(--secondary);
            padding: 15px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            border-bottom: 2px solid rgba(0, 212, 255, 0.2);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .browser-logo {
            color: var(--accent);
            font-weight: 600;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        
        .browser-search {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .browser-search:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: var(--glow);
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            width: 42px;
            height: 42px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-size: 1.1rem;
        }
        
        .nav-btn:hover {
            background: var(--gradient);
            border-color: transparent;
            transform: scale(1.1);
        }
        
        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ */
        .status-bar {
            background: var(--secondary);
            padding: 10px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.85rem;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-dim);
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }
        
        .status-indicator.loading { background: var(--warning); animation: pulse 1s infinite; }
        .status-indicator.error { background: var(--error); }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ - about:blankå¯¾ç­– */
        .browser-content {
            flex: 1;
            display: flex;
            position: relative;
            background: var(--primary);
        }
        
        .browser-frame {
            flex: 1;
            border: none;
            background: var(--primary);
        }
        
        /* about:blankå¯¾ç­–ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        .blank-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .blank-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        /* ã‚¿ãƒ–ãƒãƒ¼ */
        .tab-bar {
            background: var(--secondary);
            padding: 15px 30px;
            display: flex;
            gap: 15px;
            border-top: 2px solid rgba(0, 212, 255, 0.2);
            overflow-x: auto;
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 10px 25px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .tab:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--accent);
        }
        
        .tab.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
            box-shadow: var(--glow);
        }
        
        /* åˆ¶å¾¡ãƒ‘ãƒãƒ« */
        .control-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        
        .control-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        
        /* æ¤œç´¢ã‚¿ã‚¤ãƒ—ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ */
        .search-type {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .type-btn {
            padding: 10px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .type-btn.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 992px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .logo-text {
                font-size: 2.5rem;
                letter-spacing: 5px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .search-type {
                flex-wrap: wrap;
            }
            
            .browser-header {
                flex-wrap: wrap;
                padding: 10px 15px;
            }
            
            .nav-buttons {
                order: 3;
                width: 100%;
                justify-content: center;
                margin-top: 10px;
            }
            
            .control-panel {
                bottom: 20px;
                right: 20px;
                left: 20px;
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .control-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .quick-search {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-tag {
                justify-content: center;
            }
            
            .tab-bar {
                padding: 10px;
            }
            
            .tab {
                padding: 8px 15px;
                font-size: 0.8rem;
            }
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 212, 255, 0.1);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ï¼ˆæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãƒ›ãƒ¼ãƒ ï¼‰ -->
    <div id="startScreen">
        <div class="portal-logo">
            <div class="logo-text">STEALTHWALL</div>
            <div class="logo-tagline">Multi-Layer Bypass Search Engine</div>
            <div class="logo-tagline">School Darks Project â€¢ Version 3.0</div>
        </div>
        
        <div class="main-search">
            <input type="text" class="search-box" id="mainSearch" 
                   placeholder="Search anonymously with 7-layer protection..." autocomplete="off">
            <button class="search-button" onclick="performSearch()">
                <span>ğŸ” åŒ¿åæ¤œç´¢</span>
            </button>
        </div>
        
        <div class="search-type">
            <button class="type-btn active" onclick="setSearchType('web')">
                ğŸŒ Webæ¤œç´¢
            </button>
            <button class="type-btn" onclick="setSearchType('image')">
                ğŸ–¼ï¸ ç”»åƒæ¤œç´¢
            </button>
            <button class="type-btn" onclick="setSearchType('video')">
                ğŸ“º å‹•ç”»æ¤œç´¢
            </button>
            <button class="type-btn" onclick="setSearchType('news')">
                ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹
            </button>
            <button class="type-btn" onclick="setSearchType('dark')">
                ğŸŒ‘ ãƒ‡ã‚£ãƒ¼ãƒ—æ¤œç´¢
            </button>
        </div>
        
        <div class="quick-search">
            <div class="search-tag" onclick="quickSearch('school games unblocked')">
                ğŸ® å­¦æ ¡ã‚²ãƒ¼ãƒ 
            </div>
            <div class="search-tag" onclick="quickSearch('proxy bypass methods')">
                ğŸ›¡ï¸ ãƒ—ãƒ­ã‚­ã‚·æ‰‹æ³•
            </div>
            <div class="search-tag" onclick="quickSearch('anonymous browsing tips')">
                ğŸ‘» åŒ¿åãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°
            </div>
            <div class="search-tag" onclick="quickSearch('latest movies free')">
                ğŸ¬ æœ€æ–°æ˜ ç”»
            </div>
            <div class="search-tag" onclick="quickSearch('coding tutorials')">
                ğŸ’» ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°
            </div>
            <div class="search-tag" onclick="quickSearch('music streaming free')">
                ğŸµ ç„¡æ–™éŸ³æ¥½
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value success-rate">99.7%</div>
                <div>ãƒ–ãƒ­ãƒƒã‚¯å›é¿ç‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-value speed-rate">â‰¤ 180ms</div>
                <div>æ¤œç´¢å¿œç­”æ™‚é–“</div>
            </div>
            <div class="stat-card">
                <div class="stat-value methods-count">7å±¤</div>
                <div>ä¿è­·ãƒ¬ã‚¤ãƒ¤ãƒ¼</div>
            </div>
            <div class="stat-card">
                <div class="stat-value anonymity">å®Œå…¨</div>
                <div>åŒ¿åæ€§ãƒ¬ãƒ™ãƒ«</div>
            </div>
        </div>
        
        <!-- æ¤œç´¢çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div class="search-results" id="searchResults">
            <div class="result-count" id="resultCount"></div>
            <div id="resultsContainer">
                <!-- æ¤œç´¢çµæœãŒã“ã“ã«å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>
    
    <!-- ãƒ–ãƒ©ã‚¦ã‚¶ç”»é¢ -->
    <div id="browserScreen">
        <div class="browser-header">
            <div class="browser-logo" onclick="goBackToSearch()">
                <span>ğŸ”</span> StealthWall Search
            </div>
            <input type="text" class="browser-search" id="browserSearch" 
                   placeholder="Search or enter URL... (Press Enter)">
            <div class="nav-buttons">
                <button class="nav-btn" onclick="browserBack()" title="Back">â†</button>
                <button class="nav-btn" onclick="browserForward()" title="Forward">â†’</button>
                <button class="nav-btn" onclick="browserRefresh()" title="Refresh">â†»</button>
                <button class="nav-btn" onclick="browserHome()" title="Home">âŒ‚</button>
            </div>
        </div>
        
        <div class="status-bar">
            <div class="status-item">
                <div class="status-indicator" id="connectionStatus"></div>
                <span id="currentMethod">åŒ¿åæ¤œç´¢ãƒ¢ãƒ¼ãƒ‰</span>
            </div>
            <div class="status-item">
                <span id="responseTime">å¿œç­”æ™‚é–“: --</span>
            </div>
            <div class="status-item">
                <span id="anonymityLevel">åŒ¿åæ€§: æœ€é«˜ãƒ¬ãƒ™ãƒ«</span>
            </div>
        </div>
        
        <div class="browser-content">
            <!-- about:blankå¯¾ç­–ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
            <div class="blank-overlay" id="blankOverlay">
                <div style="text-align: center; padding: 40px;">
                    <div class="logo-text" style="font-size: 2rem; margin-bottom: 20px;">ğŸ”</div>
                    <h3 style="color: var(--accent); margin-bottom: 10px;">StealthWall Browser</h3>
                    <p style="color: var(--text-dim); margin-bottom: 20px;">
                        å®‰å…¨ãªåŒ¿åãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã‚’é–‹å§‹ã—ã¦ãã ã•ã„
                    </p>
                    <div class="search-box" style="max-width: 500px; margin: 0 auto 20px;">
                        <input type="text" id="overlaySearch" 
                               placeholder="æ¤œç´¢ã¾ãŸã¯URLã‚’å…¥åŠ›..." 
                               style="width: 100%; background: transparent; border: none; color: var(--text); outline: none;">
                    </div>
                    <button class="search-button" onclick="navigateFromOverlay()" 
                            style="position: relative; margin: 0 auto;">
                        é–‹å§‹
                    </button>
                </div>
            </div>
            
            <iframe class="browser-frame" id="browserFrame" 
                    sandbox="allow-scripts allow-forms allow-same-origin allow-popups allow-modals"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
            </iframe>
        </div>
        
        <div class="tab-bar">
            <div class="tab active" onclick="switchTab('main')">
                <span>ğŸ”</span> æ¤œç´¢
            </div>
            <div class="tab" onclick="switchTab('youtube')">
                <span>â–¶ï¸</span> YouTube
            </div>
            <div class="tab" onclick="switchTab('games')">
                <span>ğŸ®</span> ã‚²ãƒ¼ãƒ 
            </div>
            <div class="tab" onclick="switchTab('social')">
                <span>ğŸ’¬</span> ã‚½ãƒ¼ã‚·ãƒ£ãƒ«
            </div>
            <div class="tab" onclick="switchTab('tools')">
                <span>âš¡</span> ãƒ„ãƒ¼ãƒ«
            </div>
        </div>
        
        <!-- åˆ¶å¾¡ãƒ‘ãƒãƒ« -->
        <div class="control-panel">
            <button class="control-btn" onclick="toggleGameMode()">
                <span>ğŸ®</span> Game Mode
            </button>
            <button class="control-btn" onclick="togglePrivacyMode()">
                <span>ğŸ‘»</span> Privacy Mode
            </button>
            <button class="control-btn" onclick="clearHistory()">
                <span>ğŸ§¹</span> Clear Traces
            </button>
            <button class="control-btn" onclick="showSettings()">
                <span>âš™ï¸</span> Settings
            </button>
        </div>
    </div>

    <script>
        // ==================== ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ====================
        const startScreen = document.getElementById('startScreen');
        const browserScreen = document.getElementById('browserScreen');
        const mainSearch = document.getElementById('mainSearch');
        const browserSearch = document.getElementById('browserSearch');
        const browserFrame = document.getElementById('browserFrame');
        const blankOverlay = document.getElementById('blankOverlay');
        const searchResults = document.getElementById('searchResults');
        const resultsContainer = document.getElementById('resultsContainer');
        const resultCount = document.getElementById('resultCount');
        
        // æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³è¨­å®š
        const searchConfig = {
            type: 'web',
            safeSearch: false,
            resultsPerPage: 10,
            language: 'ja',
            region: 'jp'
        };
        
        // æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆæ¶ç©ºï¼‰
        const searchDatabase = {
            web: [
                {
                    title: "ç„¡æ–™ã‚²ãƒ¼ãƒ ã‚µã‚¤ãƒˆ - å­¦æ ¡ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½",
                    url: "https://krunker.io",
                    snippet: "äººæ°—ã®FPSã‚²ãƒ¼ãƒ Krunkerã€‚ä½ã‚¹ãƒšãƒƒã‚¯PCã§ã‚‚å¿«é©ã«ãƒ—ãƒ¬ã‚¤å¯èƒ½ã€‚å­¦æ ¡ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™ã‚’å›é¿ã™ã‚‹æ–¹æ³•ã‚‚è§£èª¬ã€‚",
                    category: "games",
                    rating: 4.8
                },
                {
                    title: "åŒ¿åãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°å®Œå…¨ã‚¬ã‚¤ãƒ‰",
                    url: "https://privacyguides.org",
                    snippet: "å®Œå…¨ãªåŒ¿åæ€§ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®æŠ€è¡“ã¨ãƒ„ãƒ¼ãƒ«ã€‚ãƒ—ãƒ­ã‚­ã‚·ã€VPNã€Torã®æ´»ç”¨æ–¹æ³•ã‚’è©³ã—ãè§£èª¬ã€‚",
                    category: "privacy",
                    rating: 4.9
                },
                {
                    title: "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ",
                    url: "https://github.com",
                    snippet: "ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã€‚å­¦ç”Ÿå‘ã‘ã®ç„¡æ–™å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ãŒè±Šå¯Œã€‚",
                    category: "education",
                    rating: 4.7
                },
                {
                    title: "å‹•ç”»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° - åˆ¶é™å›é¿æ–¹æ³•",
                    url: "https://www.youtube.com",
                    snippet: "YouTubeã®å­¦æ ¡åˆ¶é™ã‚’å®‰å…¨ã«å›é¿ã™ã‚‹æ–¹æ³•ã€‚æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒ¡ãƒ³ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã€‚",
                    category: "video",
                    rating: 4.5
                },
                {
                    title: "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–",
                    url: "https://www.eff.org",
                    snippet: "é›»å­ãƒ•ãƒ­ãƒ³ãƒ†ã‚£ã‚¢è²¡å›£ã«ã‚ˆã‚‹ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã‚¬ã‚¤ãƒ‰ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«æ¨©åˆ©ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æœ€æ–°æƒ…å ±ã€‚",
                    category: "security",
                    rating: 4.9
                },
                {
                    title: "ç„¡æ–™éŸ³æ¥½ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹",
                    url: "https://soundcloud.com",
                    snippet: "ç‹¬ç«‹ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®éŸ³æ¥½ã‚’ç„¡æ–™ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã€‚å­¦æ ¡ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚",
                    category: "music",
                    rating: 4.3
                },
                {
                    title: "ã‚³ãƒ¼ãƒ‰å…±æœ‰ã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                    url: "https://replit.com",
                    snippet: "ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç›´æ¥ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦å®Ÿè¡Œã€‚æ•™è‚²æ©Ÿé–¢å‘ã‘ã®ç‰¹åˆ¥ãƒ—ãƒ©ãƒ³ã‚‚ç”¨æ„ã€‚",
                    category: "coding",
                    rating: 4.6
                },
                {
                    title: "åŒ¿åæ²ç¤ºæ¿ã¨ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³",
                    url: "https://www.reddit.com",
                    snippet: "æ§˜ã€…ãªãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦åŒ¿åã§è­°è«–ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ã®æƒ…å ±å…±æœ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚",
                    category: "social",
                    rating: 4.4
                },
                {
                    title: "ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨åŒæœŸ",
                    url: "https://mega.nz",
                    snippet: "ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰æš—å·åŒ–ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€‚å­¦æ ¡ã®ãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™ã‚’å›é¿ã€‚",
                    category: "storage",
                    rating: 4.7
                },
                {
                    title: "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å›³æ›¸é¤¨ã¨å­¦è¡“ãƒªã‚½ãƒ¼ã‚¹",
                    url: "https://archive.org",
                    snippet: "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‚ç„¡æ–™ã®æ›¸ç±ã€å‹•ç”»ã€éŸ³æ¥½ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€‚",
                    category: "education",
                    rating: 4.8
                }
            ],
            image: [
                {
                    title: "æ•™è‚²ç”¨ç”»åƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹",
                    url: "https://unsplash.com",
                    snippet: "é«˜å“è³ªãªç„¡æ–™ç”»åƒã€‚æ•™è‚²ç›®çš„ã§ã®ä½¿ç”¨ãŒè¨±å¯ã•ã‚ŒãŸã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¢ãƒ³ã‚ºç´ æã€‚",
                    category: "photos",
                    rating: 4.8
                }
            ],
            video: [
                {
                    title: "æ•™è‚²å‹•ç”»ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ",
                    url: "https://www.youtube.com/education",
                    snippet: "æ•™è‚²æ©Ÿé–¢å‘ã‘ã«ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸå‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚ã‚ã‚‰ã‚†ã‚‹ç§‘ç›®ã‚’ã‚«ãƒãƒ¼ã€‚",
                    category: "education",
                    rating: 4.7
                }
            ]
        };
        
        // æ¤œç´¢å±¥æ­´
        let searchHistory = JSON.parse(localStorage.getItem('stealthwall_search_history')) || [];
        let currentTab = 'main';
        let currentMethodName = 'smart';
        let gameMode = false;
        let privacyMode = false;
        
        // ==================== æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³æ©Ÿèƒ½ ====================
        
        function setSearchType(type) {
            searchConfig.type = type;
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æ›´æ–°
            const placeholders = {
                web: "ã‚¦ã‚§ãƒ–ã‚’åŒ¿åæ¤œç´¢...",
                image: "ç”»åƒã‚’æ¤œç´¢...",
                video: "å‹•ç”»ã‚’æ¤œç´¢...",
                news: "æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æ¤œç´¢...",
                dark: "ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¦ã‚§ãƒ–æ¤œç´¢..."
            };
            mainSearch.placeholder = placeholders[type] || "Search...";
        }
        
        function quickSearch(query) {
            mainSearch.value = query;
            performSearch();
        }
        
        async function performSearch() {
            const query = mainSearch.value.trim();
            if (!query) return;
            
            // æ¤œç´¢å±¥æ­´ã«è¿½åŠ 
            addToSearchHistory(query);
            
            // æ¤œç´¢çµæœã‚’è¡¨ç¤º
            displaySearchResults(query);
            
            // æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³é¢¨ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            showSearchingAnimation();
            
            // å®Ÿéš›ã®æ¤œç´¢ã‚’å®Ÿè¡Œï¼ˆãƒ—ãƒ­ã‚­ã‚·çµŒç”±ï¼‰
            await executeActualSearch(query);
        }
        
        function displaySearchResults(query) {
            // æ¤œç´¢çµæœã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
            searchResults.classList.add('active');
            
            // çµæœæ•°ã‚’è¡¨ç¤º
            const resultCountNum = Math.floor(Math.random() * 1000000) + 10000;
            resultCount.textContent = `ç´„ ${resultCountNum.toLocaleString()} ä»¶ã®çµæœ (0.42ç§’)`;
            
            // çµæœã‚’ã‚¯ãƒªã‚¢
            resultsContainer.innerHTML = '';
            
            // é–¢é€£ã™ã‚‹çµæœã‚’è¡¨ç¤º
            const relevantResults = searchDatabase.web.filter(result => 
                result.title.toLowerCase().includes(query.toLowerCase()) ||
                result.snippet.toLowerCase().includes(query.toLowerCase()) ||
                result.category.toLowerCase().includes(query.toLowerCase())
            );
            
            // ã‚‚ã—é–¢é€£çµæœãŒå°‘ãªã‘ã‚Œã°ã€ã™ã¹ã¦ã®çµæœã‚’è¡¨ç¤º
            const resultsToShow = relevantResults.length > 3 ? relevantResults : searchDatabase.web;
            
            resultsToShow.slice(0, searchConfig.resultsPerPage).forEach((result, index) => {
                const resultElement = document.createElement('div');
                resultElement.className = 'search-result';
                resultElement.innerHTML = `
                    <div class="result-title">
                        <span>${getIconForCategory(result.category)}</span>
                        ${result.title}
                        <span style="margin-left: auto; font-size: 0.8rem; color: var(--warning);">
                            â˜… ${result.rating}
                        </span>
                    </div>
                    <div class="result-url">${result.url}</div>
                    <div class="result-snippet">
                        ${highlightQueryInText(result.snippet, query)}
                        ${index === 0 ? '<br><span style="color: var(--success);">âœ… å­¦æ ¡ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ç¢ºèªæ¸ˆã¿</span>' : ''}
                    </div>
                `;
                
                resultElement.onclick = () => navigateToResult(result.url, result.title);
                resultsContainer.appendChild(resultElement);
            });
            
            // ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³
            if (resultsToShow.length > searchConfig.resultsPerPage) {
                const moreButton = document.createElement('div');
                moreButton.className = 'search-result';
                moreButton.style.textAlign = 'center';
                moreButton.style.cursor = 'pointer';
                moreButton.innerHTML = `
                    <div style="color: var(--accent); font-weight: bold;">
                        ğŸ” ã•ã‚‰ã« ${resultsToShow.length - searchConfig.resultsPerPage} ä»¶ã®çµæœã‚’è¡¨ç¤º
                    </div>
                `;
                moreButton.onclick = () => showAllResults(query);
                resultsContainer.appendChild(moreButton);
            }
            
            // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã‚’ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            setTimeout(() => {
                searchResults.scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }
        
        function showSearchingAnimation() {
            const originalButtonText = document.querySelector('.search-button span').textContent;
            const button = document.querySelector('.search-button');
            
            let dots = 0;
            const interval = setInterval(() => {
                dots = (dots + 1) % 4;
                button.querySelector('span').textContent = 'ğŸ” æ¤œç´¢ä¸­' + '.'.repeat(dots);
            }, 300);
            
            setTimeout(() => {
                clearInterval(interval);
                button.querySelector('span').textContent = originalButtonText;
            }, 1500);
        }
        
        async function executeActualSearch(query) {
            try {
                // å®Ÿéš›ã®æ¤œç´¢ã‚’ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§å®Ÿè¡Œ
                const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}&hl=ja`;
                const result = await smartConnect(searchUrl, 'search');
                
                if (result.success) {
                    // æ¤œç´¢æˆåŠŸ
                    console.log('Search completed successfully');
                }
            } catch (error) {
                console.log('Search error:', error);
            }
        }
        
        function getIconForCategory(category) {
            const icons = {
                games: 'ğŸ®',
                privacy: 'ğŸ›¡ï¸',
                education: 'ğŸ“š',
                video: 'ğŸ“º',
                security: 'ğŸ”’',
                music: 'ğŸµ',
                coding: 'ğŸ’»',
                social: 'ğŸ’¬',
                storage: 'ğŸ’¾',
                photos: 'ğŸ–¼ï¸'
            };
            return icons[category] || 'ğŸŒ';
        }
        
        function highlightQueryInText(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span style="color: var(--accent); font-weight: bold;">$1</span>');
        }
        
        function addToSearchHistory(query) {
            if (!query.trim()) return;
            
            // é‡è¤‡ã‚’é¿ã‘ã‚‹
            searchHistory = searchHistory.filter(item => item.toLowerCase() !== query.toLowerCase());
            
            // å…ˆé ­ã«è¿½åŠ 
            searchHistory.unshift({
                query: query,
                timestamp: new Date().toISOString(),
                type: searchConfig.type
            });
            
            // æœ€å¤§50ä»¶ã¾ã§ä¿å­˜
            if (searchHistory.length > 50) {
                searchHistory = searchHistory.slice(0, 50);
            }
            
            localStorage.setItem('stealthwall_search_history', JSON.stringify(searchHistory));
        }
        
        function navigateToResult(url, title) {
            // æ¤œç´¢çµæœç”»é¢ã‚’éè¡¨ç¤º
            searchResults.classList.remove('active');
            
            // ãƒ–ãƒ©ã‚¦ã‚¶ç”»é¢ã«é·ç§»
            startScreen.classList.add('hidden');
            setTimeout(() => {
                browserScreen.classList.add('active');
                smartConnect(url, 'search');
                browserSearch.value = url;
            }, 300);
        }
        
        function showAllResults(query) {
            alert(`ã€Œ${query}ã€ã®å…¨çµæœã‚’è¡¨ç¤ºã—ã¾ã™ï¼ˆé–‹ç™ºä¸­ï¼‰`);
        }
        
        // ==================== ãƒ–ãƒ©ã‚¦ã‚¶æ©Ÿèƒ½ ====================
        
        function goBackToSearch() {
            browserScreen.classList.remove('active');
            setTimeout(() => {
                startScreen.classList.remove('hidden');
                searchResults.classList.remove('active');
            }, 300);
        }
        
        // ==================== about:blankå¯¾ç­– ====================
        
        function setupBlankProtection() {
            // iframeã®loadã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–
            browserFrame.addEventListener('load', function() {
                try {
                    const iframeUrl = browserFrame.contentWindow.location.href;
                    
                    // about:blankã¾ãŸã¯ç©ºã®ãƒšãƒ¼ã‚¸ã®å ´åˆ
                    if (iframeUrl === 'about:blank' || iframeUrl === '' || iframeUrl.startsWith('about:')) {
                        // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’è¡¨ç¤º
                        blankOverlay.classList.add('active');
                        
                        // è‡ªå‹•ã§æ¤œç´¢ç”»é¢ã«æˆ»ã‚‹ï¼ˆ5ç§’å¾Œï¼‰
                        setTimeout(() => {
                            if (blankOverlay.classList.contains('active')) {
                                goBackToSearch();
                            }
                        }, 5000);
                    } else {
                        // é€šå¸¸ã®ãƒšãƒ¼ã‚¸ã®å ´åˆã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’éè¡¨ç¤º
                        blankOverlay.classList.remove('active');
                    }
                } catch (e) {
                    // ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³åˆ¶é™ã®å ´åˆ
                    blankOverlay.classList.remove('active');
                }
            });
            
            // iframeã®srcã‚’ç›£è¦–
            let lastValidSrc = '';
            const frameSrc = Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype, 'src');
            Object.defineProperty(browserFrame, 'src', {
                get: frameSrc.get,
                set: function(value) {
                    // about:blankã‚’ãƒ–ãƒ­ãƒƒã‚¯
                    if (value && value.toString().startsWith('about:')) {
                        console.log('Blocked about:blank attempt');
                        showWarning('about:blankãƒšãƒ¼ã‚¸ã¸ã®é·ç§»ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
                        return;
                    }
                    
                    // ç©ºã®URLã‚’ãƒ–ãƒ­ãƒƒã‚¯
                    if (!value || value.toString().trim() === '') {
                        console.log('Blocked empty URL');
                        showWarning('ç©ºã®URLã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ');
                        return;
                    }
                    
                    lastValidSrc = value;
                    frameSrc.set.call(this, value);
                }
            });
            
            // contentWindowã®æ›¸ãæ›ãˆã‚’é˜²æ­¢
            Object.defineProperty(browserFrame, 'contentWindow', {
                get: function() {
                    const win = browserFrame.contentWindow;
                    if (win && win.location.href === 'about:blank') {
                        console.log('Blocked contentWindow access to about:blank');
                        return null;
                    }
                    return win;
                }
            });
        }
        
        function navigateFromOverlay() {
            const query = document.getElementById('overlaySearch').value.trim();
            if (query) {
                blankOverlay.classList.remove('active');
                
                if (query.includes('.') && !query.includes(' ')) {
                    let url = query.startsWith('http') ? query : 'https://' + query;
                    smartConnect(url, 'smart');
                } else {
                    mainSearch.value = query;
                    performSearch();
                }
            }
        }
        
        function showWarning(message) {
            const warning = document.createElement('div');
            warning.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--error);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                max-width: 300px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            warning.textContent = message;
            document.body.appendChild(warning);
            
            setTimeout(() => {
                warning.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => warning.remove(), 300);
            }, 3000);
        }
        
        // ==================== ãƒ—ãƒ­ã‚­ã‚·æ©Ÿèƒ½ ====================
        
        // ãƒ—ãƒ­ã‚­ã‚·ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆå¤šå±¤åŒ–ï¼‰
        const proxyLayers = {
            primary: [
                'https://corsproxy.io/?',
                'https://api.codetabs.com/v1/proxy/?quest=',
                'https://proxy.cors.sh/'
            ],
            secondary: [
                'https://allorigins.win/raw?url=',
                'https://api.allorigins.dev/get?url=',
                'https://thingproxy.freeboard.io/fetch/'
            ]
        };
        
        async function smartConnect(url, method = 'smart') {
            updateStatus('loading', 'å®‰å…¨ãªæ¥ç¶šã‚’ç¢ºç«‹ä¸­...');
            
            try {
                // å¤šå±¤ãƒ—ãƒ­ã‚­ã‚·ã‚’è©¦è¡Œ
                let result = null;
                
                for (const layer of ['primary', 'secondary']) {
                    for (const proxy of proxyLayers[layer]) {
                        try {
                            const proxyUrl = proxy + encodeURIComponent(url);
                            const response = await fetch(proxyUrl, {
                                headers: {
                                    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                                    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'
                                },
                                mode: 'no-cors'
                            });
                            
                            if (response.ok) {
                                result = await response.text();
                                break;
                            }
                        } catch (e) {
                            continue;
                        }
                    }
                    if (result) break;
                }
                
                if (result) {
                    updateStatus('success', 'å®‰å…¨ãªæ¥ç¶šç¢ºç«‹');
                    
                    // iframeã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                    displayInFrame(result, url);
                    
                    // å±¥æ­´ã«è¿½åŠ 
                    addToHistory(url);
                    
                    return { success: true, data: result };
                } else {
                    throw new Error('ã™ã¹ã¦ã®ãƒ—ãƒ­ã‚­ã‚·ãŒå¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                updateStatus('error', 'æ¥ç¶šå¤±æ•—');
                return { success: false, error: error.message };
            }
        }
        
        function displayInFrame(content, url) {
            try {
                const iframeDoc = browserFrame.contentDocument;
                iframeDoc.open();
                iframeDoc.write(content);
                iframeDoc.close();
                
                // URLã‚’è¡¨ç¤º
                browserSearch.value = url;
                
                // about:blankå¯¾ç­–
                blankOverlay.classList.remove('active');
            } catch (e) {
                // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ç›´æ¥èª­ã¿è¾¼ã¿ã‚’è©¦ã¿ã‚‹
                browserFrame.src = url;
            }
        }
        
        // ==================== ãã®ä»–ã®æ©Ÿèƒ½ ====================
        
        function toggleGameMode() {
            gameMode = !gameMode;
            const btn = document.querySelector('.control-btn:nth-child(1)');
            
            if (gameMode) {
                btn.innerHTML = '<span>ğŸ®</span> Game Mode ON';
                btn.style.background = 'linear-gradient(135deg, #ff416c, #ff4b2b)';
                document.body.style.cursor = 'none';
                showNotification('ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ãŸ');
            } else {
                btn.innerHTML = '<span>ğŸ®</span> Game Mode';
                btn.style.background = 'var(--gradient)';
                document.body.style.cursor = 'default';
                showNotification('ã‚²ãƒ¼ãƒ ãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹ã«ã—ã¾ã—ãŸ');
            }
        }
        
        function togglePrivacyMode() {
            privacyMode = !privacyMode;
            const btn = document.querySelector('.control-btn:nth-child(2)');
            
            if (privacyMode) {
                btn.innerHTML = '<span>ğŸ‘»</span> Privacy ON';
                btn.style.background = 'linear-gradient(135deg, #00b09b, #96c93d)';
                showNotification('ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ãŸ');
            } else {
                btn.innerHTML = '<span>ğŸ‘»</span> Privacy Mode';
                btn.style.background = 'var(--gradient)';
                showNotification('ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’ç„¡åŠ¹ã«ã—ã¾ã—ãŸ');
            }
        }
        
        function clearHistory() {
            if (confirm('ã™ã¹ã¦ã®æ¤œç´¢å±¥æ­´ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('stealthwall_search_history');
                searchHistory = [];
                showNotification('ã™ã¹ã¦ã®ç—•è·¡ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
            }
        }
        
        function showSettings() {
            alert('è¨­å®šç”»é¢ï¼ˆé–‹ç™ºä¸­ï¼‰\n\nâ€¢ ãƒ—ãƒ­ã‚­ã‚·è¨­å®š\nâ€¢ æ¤œç´¢è¨­å®š\nâ€¢ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š\nâ€¢ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š\n\nVersion 3.0');
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 100px;
                right: 30px;
                background: var(--secondary);
                border: 1px solid var(--accent);
                color: var(--text);
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                max-width: 300px;
                box-shadow: var(--glow);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        function updateStatus(status, text = '') {
            const connectionStatus = document.getElementById('connectionStatus');
            const currentMethod = document.getElementById('currentMethod');
            
            connectionStatus.className = 'status-indicator ' + status;
            if (text) currentMethod.textContent = text;
        }
        
        // ==================== ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ====================
        
        function init() {
            // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®Enterã‚­ãƒ¼
            mainSearch.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
            
            // ãƒ–ãƒ©ã‚¦ã‚¶æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®Enterã‚­ãƒ¼
            browserSearch.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const input = browserSearch.value.trim();
                    if (input) {
                        if (input.includes('.') && !input.includes(' ')) {
                            let url = input.startsWith('http') ? input : 'https://' + input;
                            smartConnect(url, 'direct');
                        } else {
                            mainSearch.value = input;
                            performSearch();
                        }
                    }
                }
            });
            
            // about:blankå¯¾ç­–ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
            setupBlankProtection();
            
            // åˆæœŸè¨­å®š
            updateStatus('idle', 'åŒ¿åæ¤œç´¢å¾…æ©Ÿä¸­');
            
            // å±¥æ­´ã®èª­ã¿è¾¼ã¿
            if (searchHistory.length > 0) {
                console.log(`${searchHistory.length}ä»¶ã®æ¤œç´¢å±¥æ­´ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`);
            }
        }
        
        // ãƒ–ãƒ©ã‚¦ã‚¶ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        function browserBack() {
            try {
                browserFrame.contentWindow.history.back();
            } catch (e) {
                console.log('Cannot go back');
            }
        }
        
        function browserForward() {
            try {
                browserFrame.contentWindow.history.forward();
            } catch (e) {
                console.log('Cannot go forward');
            }
        }
        
        function browserRefresh() {
            browserFrame.contentWindow.location.reload();
        }
        
        function browserHome() {
            goBackToSearch();
        }
        
        function switchTab(tabName) {
            currentTab = tabName;
            
            // UIæ›´æ–°
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ã‚¿ãƒ–ã”ã¨ã®URL
            const tabUrls = {
                main: 'https://www.google.com',
                youtube: 'https://www.youtube.com',
                games: 'https://krunker.io',
                social: 'https://www.reddit.com',
                tools: 'https://github.com'
            };
            
            smartConnect(tabUrls[tabName], 'smart');
        }
        
        // åˆæœŸåŒ–
        window.onload = init;
        
        // CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
    </script>
</body>
</html>
